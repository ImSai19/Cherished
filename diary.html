<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cherished Secret Diary</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

    :root {
        --primary-color: #2c003e;
        --secondary-color: #800080;
        --accent-color: #a400a4;
        --card-color: #3a0044;
        --text-color: #fff;
        --shadow-color: rgba(0, 0, 0, 0.5);
        --glow-color: rgba(164, 0, 164, 0.6);
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Poppins', sans-serif;
        background-color: var(--primary-color);
        color: var(--text-color);
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        overflow-x: hidden;
        position: relative;
    }

    .background-animation {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        background: linear-gradient(125deg, #2c003e, #4a0072, #800080, #3a0044);
        background-size: 400% 400%;
        animation: gradientBG 15s ease infinite;
    }

    @keyframes gradientBG {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    .container {
        text-align: center;
        padding: 30px;
        border-radius: 15px;
        background-color: rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(10px);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        max-width: 90%;
        width: 800px;
        position: relative;
        overflow: hidden;
        transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        animation: fadeInUp 1s ease forwards;
    }

    .container::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
        transform: rotate(45deg);
        pointer-events: none;
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .title-animation {
        font-size: 2.2em;
        margin-bottom: 30px;
        position: relative;
        display: inline-block;
        background: linear-gradient(45deg, #fff, #d9a7e0, #fff);
        background-size: 200% auto;
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: shine 3s linear infinite;
    }

    @keyframes shine {
        to {
            background-position: 200% center;
        }
    }

    .diary-form {
        margin-top: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .input-container {
        position: relative;
        margin: 20px auto;
        width: 90%;
    }

    input, textarea, select {
        padding: 15px 20px;
        margin: 10px 0;
        border: none;
        border-radius: 15px;
        width: 100%;
        background-color: rgba(255, 255, 255, 0.1);
        color: var(--text-color);
        font-size: 16px;
        transition: all 0.3s;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        font-family: 'Poppins', sans-serif;
    }

    textarea {
        min-height: 200px;
        resize: vertical;
    }

    input:focus, textarea:focus, select:focus {
        outline: none;
        box-shadow: 0 0 15px var(--glow-color);
        background-color: rgba(255, 255, 255, 0.15);
        transform: translateY(-2px);
    }

    .pulse-button {
        position: relative;
        padding: 15px 30px;
        background: linear-gradient(45deg, var(--secondary-color), var(--accent-color));
        border: none;
        border-radius: 50px;
        color: white;
        cursor: pointer;
        font-size: 16px;
        font-weight: 600;
        letter-spacing: 1px;
        overflow: hidden;
        transition: all 0.3s;
        box-shadow: 0 5px 15px rgba(128, 0, 128, 0.4);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        margin: 20px auto;
    }

    .pulse-button::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.1);
        transform: scale(0);
        opacity: 0;
        border-radius: 50px;
        transition: all 0.5s;
    }

    .pulse-button:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(128, 0, 128, 0.6);
    }

    .pulse-button:hover::before {
        transform: scale(1.5);
        opacity: 0;
        animation: pulse 1s infinite;
    }

    .button-group {
        display: flex;
        gap: 10px;
        justify-content: center;
        margin-top: 20px;
    }

    .small-button {
        padding: 10px 20px;
        font-size: 14px;
    }

    @keyframes pulse {
        0% {
            transform: scale(0.9);
            opacity: 0.7;
        }
        50% {
            transform: scale(1.5);
            opacity: 0;
        }
        100% {
            transform: scale(0.9);
            opacity: 0;
        }
    }

    .diary-entries {
        margin-top: 40px;
        width: 100%;
        max-height: 400px;
        overflow-y: auto;
        padding: 0 10px;
    }

    .diary-entry {
        background: linear-gradient(135deg, var(--card-color), #4e005e);
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        text-align: left;
        animation: fadeIn 0.5s ease-in-out;
        position: relative;
        overflow: hidden;
    }

    .diary-entry::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.05) 0%, transparent 70%);
        transform: rotate(45deg);
        pointer-events: none;
    }

    .entry-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        padding-bottom: 10px;
    }

    .entry-title {
        font-size: 1.3em;
        font-weight: 600;
        color: #d9a7e0;
    }

    .entry-date {
        font-size: 0.9em;
        color: rgba(255, 255, 255, 0.7);
    }

    .entry-content {
        line-height: 1.6;
        white-space: pre-wrap;
    }

    .entry-emotion {
        display: inline-block;
        padding: 5px 10px;
        border-radius: 20px;
        font-size: 0.8em;
        margin-top: 10px;
        background-color: rgba(255, 255, 255, 0.1);
    }

    .entry-actions {
        display: flex;
        justify-content: flex-end;
        gap: 10px;
        margin-top: 15px;
    }

    .action-button {
        background: none;
        border: none;
        color: rgba(255, 255, 255, 0.7);
        cursor: pointer;
        transition: all 0.3s;
        font-size: 1.1em;
    }

    .action-button:hover {
        color: #fff;
        transform: scale(1.1);
    }

    .edit-button:hover {
        color: #3498db;
    }

    .delete-button:hover {
        color: #e74c3c;
    }

    .back-button {
        position: absolute;
        top: 20px;
        left: 20px;
        background: rgba(255, 255, 255, 0.1);
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        cursor: pointer;
        transition: all 0.3s;
    }

    .back-button:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: translateX(-3px);
    }

    .status-message {
        margin-top: 15px;
        padding: 10px;
        border-radius: 10px;
        font-size: 14px;
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .status-message.success {
        background-color: rgba(39, 174, 96, 0.2);
        color: #2ecc71;
        opacity: 1;
    }

    .status-message.error {
        background-color: rgba(231, 76, 60, 0.2);
        color: #e74c3c;
        opacity: 1;
    }

    .hidden {
        display: none;
    }

    .pin-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100%;
        animation: fadeIn 0.5s ease-in-out;
    }

    .pin-input {
        letter-spacing: 0.5em;
        text-align: center;
        font-size: 1.5em;
        max-width: 200px;
    }

    .emotion-icon {
        font-size: 1.5em;
        margin-right: 10px;
        vertical-align: middle;
    }

    .happy { color: #f1c40f; }
    .sad { color: #3498db; }
    .angry { color: #e74c3c; }
    .excited { color: #2ecc71; }
    .anxious { color: #9b59b6; }
    .calm { color: #1abc9c; }
    .confused { color: #e67e22; }
    .loved { color: #ff7979; }

    /* Custom scrollbar */
    .diary-entries::-webkit-scrollbar {
        width: 8px;
    }

    .diary-entries::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 10px;
    }

    .diary-entries::-webkit-scrollbar-thumb {
        background: var(--accent-color);
        border-radius: 10px;
    }

    .diary-entries::-webkit-scrollbar-thumb:hover {
        background: var(--secondary-color);
    }

    .empty-state {
        padding: 40px 20px;
        text-align: center;
        color: rgba(255, 255, 255, 0.6);
    }

    .empty-state i {
        font-size: 3em;
        margin-bottom: 20px;
        opacity: 0.5;
    }

    .empty-state p {
        font-size: 1.1em;
        line-height: 1.6;
    }

    .confirmation-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
    }

    .confirmation-modal.active {
        opacity: 1;
        visibility: visible;
    }

    .modal-content {
        background: linear-gradient(135deg, var(--card-color), #4e005e);
        padding: 30px;
        border-radius: 15px;
        text-align: center;
        max-width: 400px;
        width: 90%;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        transform: scale(0.8);
        transition: transform 0.3s ease;
    }

    .confirmation-modal.active .modal-content {
        transform: scale(1);
    }

    .modal-title {
        font-size: 1.5em;
        margin-bottom: 20px;
        color: #d9a7e0;
    }

    .modal-buttons {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 25px;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 768px) {
        .container {
            padding: 20px;
            width: 95%;
        }
        
        .title-animation {
            font-size: 1.8em;
        }
        
        .back-button {
            top: 15px;
            left: 15px;
            width: 35px;
            height: 35px;
        }

        .button-group {
            flex-direction: column;
            align-items: center;
        }
    }
</style>
<body>
    <div class="background-animation"></div>
    
    <a href="index.html" class="back-button">
        <i class="fas fa-arrow-left"></i>
    </a>

    <div class="container" id="pin-container">
        <div class="pin-container">
            <h1 class="title-animation">Cherished Secret Diary</h1>
            <div class="input-container">
                <input type="password" id="pin-input" class="pin-input" placeholder="Enter PIN" maxlength="4">
            </div>
            <button id="unlock-button" class="pulse-button">
                <i class="fas fa-unlock-alt"></i>
                <span>Unlock Diary</span>
            </button>
            <div id="pin-status" class="status-message"></div>
        </div>
    </div>

    <div class="container hidden" id="diary-container">
        <h1 class="title-animation">Cherished Secret Diary</h1>
        
        <div class="diary-form">
            <div class="input-container">
                <input type="text" id="entry-title" placeholder="Title of your entry">
            </div>
            <div class="input-container">
                <textarea id="entry-content" placeholder="Write your thoughts, feelings, and experiences here..."></textarea>
            </div>
            <div class="input-container">
                <select id="entry-emotion">
                    <option value="" disabled selected>How are you feeling?</option>
                    <option value="happy">Happy üòä</option>
                    <option value="sad">Sad üò¢</option>
                    <option value="angry">Angry üò†</option>
                    <option value="excited">Excited ü§©</option>
                    <option value="anxious">Anxious üò∞</option>
                    <option value="calm">Calm üòå</option>
                    <option value="confused">Confused ü§î</option>
                    <option value="loved">Loved ‚ù§Ô∏è</option>
                </select>
            </div>
            <div class="button-group">
                <button id="save-button" class="pulse-button">
                    <i class="fas fa-save"></i>
                    <span>Save Entry</span>
                </button>
                <button id="clear-button" class="pulse-button small-button">
                    <i class="fas fa-eraser"></i>
                    <span>Clear</span>
                </button>
            </div>
            <div id="entry-status" class="status-message"></div>
        </div>
        
        <div class="diary-entries" id="entries-container">
            <!-- Entries will be dynamically added here -->
        </div>
    </div>

    <div class="confirmation-modal" id="delete-modal">
        <div class="modal-content">
            <h2 class="modal-title">Delete Entry</h2>
            <p>Are you sure you want to delete this entry? This action cannot be undone.</p>
            <div class="modal-buttons">
                <button id="confirm-delete" class="pulse-button small-button">
                    <i class="fas fa-trash"></i>
                    <span>Delete</span>
                </button>
                <button id="cancel-delete" class="pulse-button small-button">
                    <i class="fas fa-times"></i>
                    <span>Cancel</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        // PIN Configuration
        const correctPin = "1234"; // Change this to your desired PIN
        
        // DOM Elements
        const pinContainer = document.getElementById('pin-container');
        const diaryContainer = document.getElementById('diary-container');
        const pinInput = document.getElementById('pin-input');
        const unlockButton = document.getElementById('unlock-button');
        const pinStatus = document.getElementById('pin-status');
        
        const entryTitle = document.getElementById('entry-title');
        const entryContent = document.getElementById('entry-content');
        const entryEmotion = document.getElementById('entry-emotion');
        const saveButton = document.getElementById('save-button');
        const clearButton = document.getElementById('clear-button');
        const entryStatus = document.getElementById('entry-status');
        const entriesContainer = document.getElementById('entries-container');
        
        const deleteModal = document.getElementById('delete-modal');
        const confirmDelete = document.getElementById('confirm-delete');
        const cancelDelete = document.getElementById('cancel-delete');
        
        // Variables
        let currentEntryId = null;
        let isEditing = false;
        
        // Event Listeners
        unlockButton.addEventListener('click', unlockDiary);
        pinInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') unlockDiary();
        });
        
        saveButton.addEventListener('click', saveEntry);
        clearButton.addEventListener('click', clearForm);
        
        confirmDelete.addEventListener('click', confirmDeleteEntry);
        cancelDelete.addEventListener('click', () => {
            deleteModal.classList.remove('active');
            currentEntryId = null;
        });
        
        // Functions
        function unlockDiary() {
            const enteredPin = pinInput.value.trim();
            
            if (enteredPin === correctPin) {
                pinContainer.classList.add('hidden');
                diaryContainer.classList.remove('hidden');
                loadEntries();
            } else {
                showStatus(pinStatus, 'Incorrect PIN. Please try again.', 'error');
                pinInput.value = '';
                pinInput.focus();
                
                // Add shake animation
                pinInput.classList.add('shake');
                setTimeout(() => {
                    pinInput.classList.remove('shake');
                }, 500);
            }
        }
        
        function saveEntry() {
            const title = entryTitle.value.trim();
            const content = entryContent.value.trim();
            const emotion = entryEmotion.value;
            
            if (!title || !content) {
                showStatus(entryStatus, 'Please fill in both title and content.', 'error');
                return;
            }
            
            const timestamp = new Date().toISOString();
            const date = new Date().toLocaleString();
            
            let entries = getEntries();
            
            if (isEditing && currentEntryId) {
                // Update existing entry
                const index = entries.findIndex(entry => entry.id === currentEntryId);
                if (index !== -1) {
                    entries[index] = {
                        ...entries[index],
                        title,
                        content,
                        emotion,
                        updatedAt: timestamp
                    };
                    showStatus(entryStatus, 'Entry updated successfully!', 'success');
                }
            } else {
                // Create new entry
                const newEntry = {
                    id: generateId(),
                    title,
                    content,
                    emotion,
                    createdAt: timestamp,
                    updatedAt: timestamp,
                    date
                };
                
                entries.push(newEntry);
                showStatus(entryStatus, 'Entry saved successfully!', 'success');
            }
            
            saveEntries(entries);
            loadEntries();
            clearForm();
        }
        
        function loadEntries() {
            const entries = getEntries();
            entriesContainer.innerHTML = '';
            
            if (entries.length === 0) {
                entriesContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-book-open"></i>
                        <p>Your diary is empty. Start writing your thoughts and feelings!</p>
                    </div>
                `;
                return;
            }
            
            // Sort entries by creation date (newest first)
            entries.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            
            entries.forEach(entry => {
                const entryElement = document.createElement('div');
                entryElement.className = 'diary-entry';
                entryElement.setAttribute('data-id', entry.id);
                
                const emotionIcon = getEmotionIcon(entry.emotion);
                
                entryElement.innerHTML = `
                    <div class="entry-header">
                        <div class="entry-title">${emotionIcon} ${entry.title}</div>
                        <div class="entry-date">${formatDate(entry.createdAt)}</div>
                    </div>
                    <div class="entry-content">${entry.content}</div>
                    <div class="entry-actions">
                        <button class="action-button edit-button" onclick="editEntry('${entry.id}')">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="action-button delete-button" onclick="deleteEntry('${entry.id}')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                
                entriesContainer.appendChild(entryElement);
            });
        }
        
        function editEntry(id) {
            const entries = getEntries();
            const entry = entries.find(entry => entry.id === id);
            
            if (entry) {
                entryTitle.value = entry.title;
                entryContent.value = entry.content;
                entryEmotion.value = entry.emotion || '';
                
                currentEntryId = id;
                isEditing = true;
                
                saveButton.innerHTML = '<i class="fas fa-save"></i><span>Update Entry</span>';
                
                // Scroll to form
                diaryContainer.scrollIntoView({ behavior: 'smooth' });
            }
        }
        
        function deleteEntry(id) {
            currentEntryId = id;
            deleteModal.classList.add('active');
        }
        
        function confirmDeleteEntry() {
            if (!currentEntryId) return;
            
            let entries = getEntries();
            entries = entries.filter(entry => entry.id !== currentEntryId);
            
            saveEntries(entries);
            loadEntries();
            
            deleteModal.classList.remove('active');
            currentEntryId = null;
            
            showStatus(entryStatus, 'Entry deleted successfully!', 'success');
        }
        
        function clearForm() {
            entryTitle.value = '';
            entryContent.value = '';
            entryEmotion.value = '';
            
            currentEntryId = null;
            isEditing = false;
            
            saveButton.innerHTML = '<i class="fas fa-save"></i><span>Save Entry</span>';
        }
        
        // Helper Functions
        function getEntries() {
            const entriesJson = localStorage.getItem('diaryEntries');
            return entriesJson ? JSON.parse(entriesJson) : [];
        }
        
        function saveEntries(entries) {
            localStorage.setItem('diaryEntries', JSON.stringify(entries));
        }
        
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }
        
        function formatDate(dateString) {
            const options = {
                year: 'numeric',
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            return new Date(dateString).toLocaleDateString(undefined, options);
        }
        
        function getEmotionIcon(emotion) {
            const emotions = {
                'happy': '<i class="fas fa-smile emotion-icon happy"></i>',
                'sad': '<i class="fas fa-sad-tear emotion-icon sad"></i>',
                'angry': '<i class="fas fa-angry emotion-icon angry"></i>',
                'excited': '<i class="fas fa-grin-stars emotion-icon excited"></i>',
                'anxious': '<i class="fas fa-flushed emotion-icon anxious"></i>',
                'calm': '<i class="fas fa-meditation emotion-icon calm"></i>',
                'confused': '<i class="fas fa-confused emotion-icon confused"></i>',
                'loved': '<i class="fas fa-heart emotion-icon loved"></i>'
            };
            
            return emotions[emotion] || '';
        }
        
        function showStatus(element, message, type) {
            element.textContent = message;
            element.className = 'status-message ' + type;
            
            setTimeout(() => {
                element.className = 'status-message';
            }, 3000);
        }
        
        // Add keypress event for PIN input
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                deleteModal.classList.remove('active');
            }
        });
        
        // Add shake animation style
        document.head.insertAdjacentHTML('beforeend', `
            <style>
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
                    20%, 40%, 60%, 80% { transform: translateX(5px); }
                }
                
                .shake {
                    animation: shake 0.5s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
                }
            </style>
        `);
    </script>
</body>
</html>

